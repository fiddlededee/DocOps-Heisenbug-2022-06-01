bill-process-test.adoc


 private static Stream&lt;String&gt; provideCorrectTransitions() {
    draft --&gt; pending
    pending --&gt; approved
    pending --&gt; rejected
  return Stream.of(doc.split('\n')[1..-2] as String[]);
}

@ParameterizedTest
@MethodSource("provideCorrectTransitions")
void ProcessingFollowsModel(correctTransition) {
  def transition = correctTransition.split('--&gt;').collect { it.trim() };
  billProcessor.setState(transition[0])
  assertThat(Arrays.asList(billProcessor.getPossibleStates() as String[])
      , hasItems(transition[1]))
} .length = 0